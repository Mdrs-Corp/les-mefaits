<!DOCTYPE html>
<html>

<head>
  <title>sudoku solver</title>
  <style type="text/css">
    canvas {
      display: block;
    }

    html,
    body {
      margin: 0px;
    }
  </style>
</head>

<body>
  <canvas id="game"></canvas>

  <script type='text/javascript'>
    console.log(1 == "1");
    const canvas = document.getElementById("game");
    const context = canvas.getContext("2d");
    var width = window.innerWidth;
    var height = window.innerHeight;
    class Alexis {
      constructor() {
        this.x = Math.random() * width;
        this.y = 0;
        this.sx = 60;
        this.sy = 60;
        this.aaron = false;
      }
      draw() {
        context.drawImage(alex, this.x - this.sx/2, this.y - this.sy/2, this.sx, this.sy);
        /*context.fillStyle = "yellow";
        context.fillRect(this.x - this.sx/2, this.y - this.sy/2, this.sx, this.sy);*/
      }
      update() {
        this.y += alexisSpeed;
        if (this.y >= height+this.sy) {
          this.aaron = true;
        }
      }
    }
    class Vincent {
      constructor(a, b) {
        this.x = a;
        this.y = b;
        this.speed = bulletSpeed;
        this.aaron = false;
      }
      draw() {
        context.fillStyle = "rgb(158, 0, 255)";
        context.fillRect(this.x, this.y, 5, 10);
      }
      update(){
        this.y -= this.speed;
        if (this.y < 0) {
          this.aaron = true;
        }
      }
    }
    class Joseph {
      constructor() {
        this.x = width / 2;
        this.sx = 90;
        this.sy = 90;
      }
      draw() {
        context.drawImage(rayan, this.x - this.sx/2, height - 50 - this.sy/2, this.sx, this.sy);
        /*context.fillStyle = "#6174ee";
        context.fillRect(this.x - this.sx/2, height - 50 - this.sy/2, this.sx, this.sy);*/
      }
    }


    function resize() {
      width = window.innerWidth,
        height = window.innerHeight,
        ratio = window.devicePixelRatio;
      canvas.width = width * ratio;
      canvas.height = height * ratio;
      canvas.style.width = width + "px";
      canvas.style.height = height + "px";
      context.scale(ratio, ratio);
    }
    window.onresize = function() {
      resize();
    };
    window.onload = function() {
      resize();
      window.requestAnimationFrame(boucle);
    }
    document.addEventListener("keydown", (e) => {
      if (e.repeat) return;
      if (e.keyCode == 37) {
        left = true;
      } else if (e.keyCode == 39) {
        right = true;
      } else if (e.keyCode == 38) {
        up = true;
      }
    }, false);
    document.addEventListener('keyup', (e) => {
      if (e.keyCode == 37) {
        left = false;
      } else if (e.keyCode == 39) {
        right = false;
      } else if (e.keyCode == 38) {
        up = false;
      }
    })
    joseph = new Joseph();
    direc = 0;
    vincents = [];
    alexis = [new Alexis()];

    let left = false;
    let right = false;
    let up = false;

    let speed = 5;
    let bulletSpeed = 8;
    let alexisSpeed = 0.8;

    let shoot = 0;

    let alex = new Image();
    alex.src = "alexis.bmp";

    let rayan = new Image();
    rayan.src = "ryan.png";

    function boucle() {
      context.clearRect(0, 0, width, height);
      context.beginPath();
      context.fillStyle = "black";
      context.rect(0, 0, width, height);
      context.fill();
      context.closePath();

      if (left){
        joseph.x -= speed;
      }
      if (right){
        joseph.x += speed;
      }
      if (up && shoot == 0) {
        vincents.push(new Vincent(joseph.x, height - 50));
        shoot = 10;
      }
      shoot = Math.max(0, shoot-1);

      if (Math.random() > .99) {
        alexis.push(new Alexis())
      }
      for (let alexi of alexis) {
        alexi.draw();
        alexi.update();
      }
      for (let vincent of vincents) {
        vincent.draw();
        vincent.update();
      }
      joseph.draw();
      joseph.x = ((joseph.x % width) + width) % width;

      alexis = alexis.filter((el) => !el.aaron);
      vincents = vincents.filter((el) => !el.aaron);

      window.requestAnimationFrame(boucle);
    }
    boucle()
  </script>
</body>

</html>
